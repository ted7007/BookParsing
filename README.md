# BookParsing 
Тестовое задание.

Задача  
---  

Для обучения и работы приложения необходимо создать БД книг.  
Набор данных книги: название, автор, описание, год, изображение обложки, ISBN, количество страниц, жанр, теги.  
Ваша задача - подготовить базу данных книг.   
Список книг берется с сайта https://igraslov.store/ и ограничен им  
Для этого необходимо написать сервис, который парсит книги с книжных сайтов (любой из списка, но не без аргументации): 
лабиринт, литрес, читай-город, ozon, google books, goodreads, библиотеки (электронные), а также сохраняет их в БД.  
Важно:
* должна быть реализована возможность расширять работу с другими сайтами, на которых есть книги.
Иными словами, “хочу парсить новый сайт, на котором есть книги, которых нет нигде больше. 
Могу легко расширить работу сервиса”.  

* апи для работы с сервисом, которое позволит получить список книг

Предложенное решение:  
---  
Решение задачи за два этапа:  

Этап #1 Получить список всех isbn книг с сайта igraslov.store, залить их в БД   
  
Аргументация:  
 По ISBN в поиске выдаются только нужные книги, либо ничего не выдается.  
 ISBN в базе позволят экономить время для парсинга следующих сайтов(или текущий сайт в другой сессии), расширять ограничение по isbn в будущем.  
   
Проблемы на этом этапе:  
 * Откуда парсить?  
 1. Парсинг в отдельном консольном приложении, поочередные данные отправлять на api  
 2. Парсинг в одном приложении с API  
&emsp; 2.1 Парсинг начинается по запросу к API   
&emsp; 2.2 Парсинг начинается в фоновом сервисе с момента запуска приложения  
 Решил парсить в одном приложении с API. 
 Парсинг по запросу к API на локальном сервере работал успешно,  
 но на хостинговом соединение во время запроса обрывается через +- минуту.  
 Поэтому перешел на фоновый процесс, где в последствии столкнулся с последними проблемами.

 * Как парсить?    
 запросы к api в Network я не поймал, поэтому решил скачивать html, по необходимости получать с них ссылки для скачивания следующиъ html   
Итог:  
На локальном сервере этап выполняется. БД с isbn заполнена. На хостинге появилась проблема(позже).  
  
Этап #2 Вытаскивать из БД список isbn, по каждой isbn получить данные книги с выбранного сайта, заливать данные в БД.  
  
Аргументация:  
Выбранный сайт для парсинга chitayGorod, поотому что:  
&emsp;Положительное впечатление оставило пойманное api в Network, но к сожалению оно защищено  
&emsp;Точный поиск по isbn, не выдает лишнего  
&emsp;Нет дополнительных форм, возрастных ограничений
&emsp;Есть теги  
  
 
Проблемы на этом этапе:  
  * Поисковой запрос к сайту с сервера не выдает результатов (не находит книгу по заданному запросу с isbn, хотя на самом деле она есть)  
    
    
Другие проблемы:  
В последний день обнаружилось, что парсинг на хостинге обрывается через некоторый промежуток времени,  
Обрыв не сопроводится ошибками в логах.  
Получилось собрать в БД только 45 ISBN, когда на локальном сервере количество ISBN достигало 2000+ (пока я сам не окончил работу приложени).  
  
Общий итог
---
Задача не выполнена т.к. БД не готова.  
Возможные варианты решений текущих проблем:
Смена выбранного сайта для парсинга (переписать алгоритм чтения html),
Переход на парсинг с отдельного приложения, а БД на сервере заполнять через API.  



